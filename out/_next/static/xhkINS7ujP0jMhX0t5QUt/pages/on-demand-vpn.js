(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(111);Object.defineProperty(t,"MDXTag",{enumerable:!0,get:function(){return a(o).default}});var r=n(48);function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"MDXProvider",{enumerable:!0,get:function(){return a(r).default}})},111:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(0),i=s(a),u=s(n(62)),c=n(48);function s(e){return e&&e.__esModule?e:{default:e}}var l={inlineCode:"code",wrapper:"div"},p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.parentName,r=e.props,a=void 0===r?{}:r,c=e.children,s=e.components,p=void 0===s?{}:s,f=e.Layout,h=e.layoutProps,d=p[n+"."+t]||p[t]||l[t]||t;return f?((0,u.default)(this,f),i.default.createElement(f,o({components:p},h),i.default.createElement(d,a,c))):i.default.createElement(d,a,c)}}]),t}();t.default=(0,c.withMDXComponents)(p)},112:function(e,t,n){"use strict";t.__esModule=!0;var o=a(n(0)),r=a(n(113));function a(e){return e&&e.__esModule?e:{default:e}}t.default=o.default.createContext||r.default,e.exports=t.default},113:function(e,t,n){"use strict";t.__esModule=!0;var o=n(0),r=(i(o),i(n(14))),a=i(n(114));i(n(115));function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=1073741823;t.default=function(e,t){var n,i,p="__create-react-context-"+(0,a.default)()+"__",f=function(e){function n(){var t,o,r,a;u(this,n);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return t=o=c(this,e.call.apply(e,[this].concat(s))),o.emitter=(r=o.props.value,a=[],{on:function(e){a.push(e)},off:function(e){a=a.filter(function(t){return t!==e})},get:function(){return r},set:function(e,t){r=e,a.forEach(function(e){return e(r,t)})}}),c(o,t)}return s(n,e),n.prototype.getChildContext=function(){var e;return(e={})[p]=this.emitter,e},n.prototype.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n=this.props.value,o=e.value,r=void 0;((a=n)===(i=o)?0!==a||1/a==1/i:a!=a&&i!=i)?r=0:(r="function"==typeof t?t(n,o):l,0!=(r|=0)&&this.emitter.set(e.value,r))}var a,i},n.prototype.render=function(){return this.props.children},n}(o.Component);f.childContextTypes=((n={})[p]=r.default.object.isRequired,n);var h=function(t){function n(){var e,o;u(this,n);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=o=c(this,t.call.apply(t,[this].concat(a))),o.state={value:o.getValue()},o.onUpdate=function(e,t){0!=((0|o.observedBits)&t)&&o.setState({value:o.getValue()})},c(o,e)}return s(n,t),n.prototype.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?l:t},n.prototype.componentDidMount=function(){this.context[p]&&this.context[p].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?l:e},n.prototype.componentWillUnmount=function(){this.context[p]&&this.context[p].off(this.onUpdate)},n.prototype.getValue=function(){return this.context[p]?this.context[p].get():e},n.prototype.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(o.Component);return h.contextTypes=((i={})[p]=r.default.object,i),{Provider:f,Consumer:h}},e.exports=t.default},114:function(e,t,n){"use strict";(function(t){var n="__global_unique_id__";e.exports=function(){return t[n]=(t[n]||0)+1}}).call(this,n(60))},115:function(e,t,n){"use strict";var o=n(116);e.exports=o},116:function(e,t,n){"use strict";function o(e){return function(){return e}}var r=function(){};r.thatReturns=o,r.thatReturnsFalse=o(!1),r.thatReturnsTrue=o(!0),r.thatReturnsNull=o(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},224:function(e,t,n){__NEXT_REGISTER_PAGE("/on-demand-vpn",function(){return e.exports=n(225),{page:e.exports.default}})},225:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(1),i=n(49);function u(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}t.default=function(e){var t=e.components,n=u(e,["components"]);return r.a.createElement(a.MDXTag,{name:"wrapper",Layout:function(e){var t=e.children;return r.a.createElement(i.a,{title:"On Demand VPN using Google Cloud",date:"2016-12-29"},t)},layoutProps:n,components:t},r.a.createElement(a.MDXTag,{name:"p",components:t},"Given the amount of geo-restricted content on the internet these days, it can be nice to be able to reach for a VPN whenever you might need one.\nPaying for a subscription to a VPN service is one way to do this, but if you, like me,\nfind your VPN needs to be very sporatic, then a subscription model probably doesn't feel like the right way to go."),r.a.createElement(a.MDXTag,{name:"p",components:t},"Today I would like to go over my solution to this, which is to use a SOCKS proxy to a cloud VM instead.\nInstead of paying a monthly subscription, this means that you only pay as much as you use it.\nFor light to medium video streaming, this will most likely be below $1/month."),r.a.createElement(a.MDXTag,{name:"p",components:t},"To get started, make sure that you have a Google Cloud account with valid billing info and a project set up.\nIf not, you can make one ",r.a.createElement(a.MDXTag,{name:"a",components:t,parentName:"p",props:{href:"https://cloud.google.com/"}},"here"),"."),r.a.createElement(a.MDXTag,{name:"p",components:t},"After that install ",r.a.createElement(a.MDXTag,{name:"a",components:t,parentName:"p",props:{href:"https://cloud.google.com/sdk/docs/quickstart-mac-os-x"}},"Google Cloud SDK for OS X")," and follow their guide to get it initialized.\nMake sure you select the compute engine zone which corresponds to the country you'd like to have your VM in. You can find a list of the compute engine zones and their locations ",r.a.createElement(a.MDXTag,{name:"a",components:t,parentName:"p",props:{href:"https://cloud.google.com/compute/docs/regions-zones/regions-zones#available"}},"here"),"."),r.a.createElement(a.MDXTag,{name:"p",components:t},"What we now want to do can be summarized in the following steps:\n1. Create a micro VM\n2. Set up an SSH tunnel to it\n3. Tell OS X to use this tunnel as a SOCKS proxy\n4. Wait for the user to finish using the tunnel\n5. Tear everything down"),r.a.createElement(a.MDXTag,{name:"p",components:t},"Using the SDK and some native OS X commands, we can turn all of this into a handle little script, which you can find below:"),r.a.createElement(a.MDXTag,{name:"pre",components:t},r.a.createElement(a.MDXTag,{name:"code",components:t,parentName:"pre",props:{className:"language-bash",metaString:""}},'#!/usr/bin/env bash\n\ntrap \' \' INT\n\necho "Initializing..."\n\n# Start the VPN instance\ngcloud compute instances create   tmp-vpn   --machine-type f1-micro\n\n# Set up the SSH tunnel and activate proxy\n# Sleep a bit first to make sure that the SSH connection is up before the proxy is enabled\n(sleep 5; networksetup -setsocksfirewallproxy Wi-Fi localhost 4242) & gcloud compute ssh tmp-vpn   --strict-host-key-checking=no   --command="echo "VPN activated. Press Ctrl+C to exit." && tail -f /dev/null"   -- -D 4242\n\necho "Cleaning up..."\n\n# Deactivate SOCKS proxy\nnetworksetup -setsocksfirewallproxystate Wi-Fi off\n\n# Delete the VPN instance\ngcloud compute instances delete   tmp-vpn\n\necho "Cleanup complete."\n')),r.a.createElement(a.MDXTag,{name:"p",components:t},"As you can see, there isn't really anything to it,\nso applying a similar approach to another cloud provider should be pretty straight forward.\nWhile it does take a little bit of time to set up the connection and later tear down the VM,\nwe now have ourselves a very cost-effective on demand VPN."),r.a.createElement(a.MDXTag,{name:"p",components:t},"Enjoy!"))}},48:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withMDXComponents=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=u(n(0)),a=u(n(112)),i=u(n(14));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,a.default)({}),s=c.Provider,l=c.Consumer;t.withMDXComponents=function(e){return function(t){var n=t.components,a=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(t,["components"]);return r.default.createElement(l,null,function(t){return r.default.createElement(e,o({components:n||t},a))})}};var p=function(e){var t=e.components,n=e.children;return r.default.createElement(s,{value:t},n)};p.propTypes={components:i.default.object.isRequired,children:i.default.element.isRequired},t.default=p},49:function(e,t,n){"use strict";var o=n(0),r=n.n(o),a=n(50),i=n.n(a);t.a=function(e){var t=e.children,n=e.date,o=e.title;return r.a.createElement("div",null,r.a.createElement(i.a,null,r.a.createElement("title",null,o)),r.a.createElement("h1",null,o),r.a.createElement("h2",null,n),r.a.createElement("div",null,t))}},50:function(e,t,n){e.exports=n(117)}},[[224,1,0]]]);